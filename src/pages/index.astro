---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="font-sans text-slate-900 bg-white">
    <Header />
    <main class="max-w-[680px] mx-auto px-6 py-12 md:py-16">
      <section class="mb-12">
        <h1
          class="text-4xl md:text-5xl font-bold tracking-tight mb-3 bg-linear-to-br from-navy-800 to-navy-600 bg-clip-text text-transparent"
        >
          Kyle Thompson
        </h1>
        <p class="text-lg md:text-xl text-slate-600">
          Building better CI at <a
            href="https://rwx.com"
            class="text-navy-600 underline underline-offset-2 decoration-1 hover:text-accent transition-colors"
            >RWX</a
          >. Private pilot. Dog person.
        </p>
      </section>

      <section class="mb-12 pb-12 border-b border-slate-200">
        <p class="text-slate-700 leading-relaxed mb-6">
          I&rsquo;m a software engineer at <a
            href="https://rwx.com"
            class="text-navy-600 underline underline-offset-2 decoration-1 hover:text-accent transition-colors"
            >RWX</a
          >. We&rsquo;re building CI using a graph of tasks with content-based
          caching to make your builds faster and your engineers happier.
        </p>
        <p class="text-slate-700 leading-relaxed mb-6">
          Outside of work, you might find me working in the garage in my
          woodshop or in the skies in a single-engine piston plane. If you
          can&rsquo;t find me there, my Australian Shepherd has probably herded me
          to the backyard to throw her ball.
        </p>
        <p class="text-slate-700 leading-relaxed">
          If you want to get in touch, find me on <a
            href="https://github.com/kylekthompson"
            class="text-navy-600 underline underline-offset-2 decoration-1 hover:text-accent transition-colors"
            >GitHub</a
          >, <a
            href="https://linkedin.com/in/kylekthompson"
            class="text-navy-600 underline underline-offset-2 decoration-1 hover:text-accent transition-colors"
            >LinkedIn</a
          >, or feel free to shoot me an email at <a
            href="mailto:me@kkt.dev"
            class="text-navy-600 underline underline-offset-2 decoration-1 hover:text-accent transition-colors"
            >me@kkt.dev</a
          >.
        </p>
      </section>

      {
        posts.length > 0 && (
          <section>
            <h2 class="text-lg font-semibold text-slate-500 mb-6">
              Recent Writing
            </h2>
            <ul class="space-y-0 mb-6">
              {posts.map((post) => (
                <li class="border-b border-slate-200 last:border-b-0">
                  <a
                    href={`/blog/${post.id}/`}
                    class="flex justify-between items-baseline gap-4 py-4 text-slate-900 no-underline hover:text-accent transition-colors group"
                  >
                    <span class="font-medium group-hover:underline group-hover:underline-offset-2">
                      {post.data.title}
                    </span>
                    <span class="text-sm text-slate-500 whitespace-nowrap">
                      <FormattedDate date={post.data.pubDate} />
                    </span>
                  </a>
                </li>
              ))}
            </ul>
            <a
              href="/blog"
              class="text-[15px] text-navy-600 hover:text-accent transition-colors"
            >
              View all posts
            </a>
          </section>
        )
      }
    </main>
    <Footer />
  </body>
</html>
